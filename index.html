
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flight Database com Backup</title>
  <style>
    body { font-family: sans-serif; background-color: black; color: #FFFF99; }
    .tab { display: none; }
    .tab.active { display: block; }
    table, th, td { border: 1px solid #FFFF99; border-collapse: collapse; padding: 5px; }
    th { background: #222; color: #40E0D0; }
    label { color: #40E0D0; }
    input, select, button { margin: 3px; }
    td button { margin-right: 4px; }
  </style>
</head>
<body>

<button onclick="switchTab('arrivals')">Arrivals</button>
<button onclick="switchTab('departures')">Departures</button>
<button onclick="switchTab('backup')">Backup</button>

<div id="arrivals" class="tab active">
  <h2>Arrivals</h2>
  <!-- form omitted for brevity -->
  <table id="arrivalTable">
    <thead>
      <tr><th>Airline</th><th>Flight</th><th>From</th><th>ICAO</th><th>Time</th><th>Aircraft</th><th>Days</th><th>TPS</th><th>AÃ§Ãµes</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div id="departures" class="tab">
  <h2>Departures</h2>
  <table id="departureTable">
    <thead>
      <tr><th>Airline</th><th>Flight</th><th>To</th><th>ICAO</th><th>Time</th><th>Aircraft</th><th>Days</th><th>TPS</th><th>Excluir</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div id="backup" class="tab">
  <h2>Backup de Dados</h2>
  <button onclick="exportBackup()">ðŸ”½ Exportar Backup</button>
  <input type="file" id="backupFile" accept=".json">
  <button onclick="importBackup()">ðŸ”¼ Importar Backup</button>
</div>

<script>
function switchTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function exportBackup() {
  const arrivals = [...document.querySelectorAll('#arrivalTable tbody tr')].map(tr =>
    [...tr.children].slice(0, 8).map(td => td.textContent)
  );
  const departures = [...document.querySelectorAll('#departureTable tbody tr')].map(tr =>
    [...tr.children].slice(0, 8).map(td => td.textContent)
  );
  const blob = new Blob([JSON.stringify({arrivals, departures}, null, 2)], {type: "application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "flight_backup.json";
  a.click();
}

function importBackup() {
  const file = document.getElementById('backupFile').files[0];
  if (!file) return alert("Selecione um arquivo JSON primeiro.");
  const reader = new FileReader();
  reader.onload = function(e) {
    const data = JSON.parse(e.target.result);
    localStorage.setItem("arrivals", JSON.stringify(data.arrivals));
    localStorage.setItem("departures", JSON.stringify(data.departures));
    alert("Backup importado com sucesso! Recarregue a pÃ¡gina.");
  };
  reader.readAsText(file);
}
</script>

</body>
</html>
